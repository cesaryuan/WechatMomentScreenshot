(()=>{"use strict";const e="application/font-woff",t="image/jpeg",n={woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:t,jpeg:t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"},o=function(){let e=0;return()=>(e+=1,`u${`0000${(Math.random()*Math.pow(36,4)<<0).toString(36)}`.slice(-4)}${e}`)}();function i(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return n[t]||""}function c(e){return-1!==e.search(/^(data:)/)}function r(e,t){return`data:${t};base64,${e}`}function l(e){return e.split(/,/)[1]}function u(e){return e.toBlob?new Promise((t=>e.toBlob(t))):function(e){return new Promise((t=>{const n=window.atob(e.toDataURL().split(",")[1]),o=n.length,i=new Uint8Array(o);for(let e=0;e<o;e+=1)i[e]=n.charCodeAt(e);t(new Blob([i],{type:"image/png"}))}))}(e)}function m(e){const t=[];for(let n=0,o=e.length;n<o;n+=1)t.push(e[n]);return t}function a(e,t){const n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}function d(e){return new Promise(((t,n)=>{const o=new Image;o.onload=()=>t(o),o.onerror=n,o.crossOrigin="anonymous",o.src=e}))}var s;!function(e){e.clonePseudoElement=function(e,t,n){const i=window.getComputedStyle(e,n),c=i.getPropertyValue("content");if(""===c||"none"===c)return;const r=o();try{t.className=`${t.className} ${r}`}catch(e){return}const l=document.createElement("style");l.appendChild(function(e,t,n){const o=`.${e}:${t}`,i=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: ${t};`}(n):function(e){return m(e).map((t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${o}{${i}}`)}(r,n,i)),t.appendChild(l)}}(s||(s={}));var g=function(e,t,n,o){return new(n||(n=Promise))((function(i,c){function r(e){try{u(o.next(e))}catch(e){c(e)}}function l(e){try{u(o.throw(e))}catch(e){c(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}u((o=o.apply(e,t||[])).next())}))};function f(e){return g(this,void 0,void 0,(function*(){if(e instanceof HTMLCanvasElement){const t=e.toDataURL();return"data:,"===t?Promise.resolve(e.cloneNode(!1)):d(t)}return Promise.resolve(e.cloneNode(!1))}))}function h(e,t,n){return g(this,void 0,void 0,(function*(){return n||!t||t(e)?Promise.resolve(e).then(f).then((n=>function(e,t,n){return g(this,void 0,void 0,(function*(){const o=m(e.childNodes);return 0===o.length?Promise.resolve(t):o.reduce(((e,o)=>e.then((()=>h(o,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()).then((()=>t))}))}(e,n,t))).then((t=>function(e,t){return g(this,void 0,void 0,(function*(){return t instanceof Element?Promise.resolve().then((()=>function(e,t){const n=window.getComputedStyle(e),o=t.style;n.cssText?o.cssText=n.cssText:m(n).forEach((e=>{o.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))}))}(e,t))).then((()=>function(e,t){[":before",":after"].forEach((n=>s.clonePseudoElement(e,t,n)))}(e,t))).then((()=>function(e,t){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}(e,t))).then((()=>t)):t}))}(e,t))):Promise.resolve(null)}))}const y={};function p(e,t){let n=e.replace(/\?.*/,"");if(/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),y[n])return y[n];t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());const o=(window.fetch?window.fetch(e).then((e=>e.blob())).then((e=>new Promise(((t,n)=>{const o=new FileReader;o.onloadend=()=>t(o.result),o.onerror=n,o.readAsDataURL(e)})))).then(l).catch((()=>new Promise(((e,t)=>t())))):new Promise(((t,n)=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status)return void n(new Error(`Failed to fetch resource: ${e}, status: ${o.status}`));const i=new FileReader;i.onloadend=()=>{t(l(i.result))},i.readAsDataURL(o.response)},o.ontimeout=()=>{n(new Error(`Timeout of 30000ms occured while fetching resource: ${e}`))},o.responseType="blob",o.timeout=3e4,o.open("GET",e,!0),o.send()}))).catch((n=>{let o="";if(t.imagePlaceholder){const e=t.imagePlaceholder.split(/,/);e&&e[1]&&(o=e[1])}let i=`Failed to fetch resource: ${e}`;return n&&(i="string"==typeof n?n:n.message),i&&console.error(i),o}));return y[n]=o,o}const I=/url\((['"]?)([^'"]+?)\1\)/g;function v(e){return-1!==e.search(I)}function E(e,t,n){return v(e)?Promise.resolve(e).then(B).then((o=>o.reduce(((e,o)=>e.then((e=>function(e,t,n,o,c){const l=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(i),t&&(o.href=t),i.href=e,i.href}(t,n):t;return Promise.resolve(l).then((e=>p(e,o))).then((e=>r(e,i(t)))).then((n=>e.replace(function(e){return new RegExp(`(url\\(['"]?)(${function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}(e)})(['"]?\\))`,"g")}(t),`$1${n}$3`))).then((e=>e),(()=>l))}(e,o,t,n)))),Promise.resolve(e)))):Promise.resolve(e)}function B(e){const t=[];return e.replace(I,((e,n,o)=>(t.push(o),e))),t.filter((e=>!c(e)))}var w=function(e,t,n,o){return new(n||(n=Promise))((function(i,c){function r(e){try{u(o.next(e))}catch(e){c(e)}}function l(e){try{u(o.throw(e))}catch(e){c(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}u((o=o.apply(e,t||[])).next())}))};function T(e,t){return w(this,void 0,void 0,(function*(){return e instanceof Element?Promise.resolve(e).then((e=>function(e,t){return w(this,void 0,void 0,(function*(){const n=e.style.getPropertyValue("background");return n?Promise.resolve(n).then((e=>E(e,null,t))).then((t=>(e.style.setProperty("background",t,e.style.getPropertyPriority("background")),e))):Promise.resolve(e)}))}(e,t))).then((e=>function(e,t){return e instanceof HTMLImageElement&&!c(e.src)?Promise.resolve(e.src).then((e=>p(e,t))).then((t=>r(t,i(e.src)))).then((t=>new Promise(((n,o)=>{e.onload=n,e.onerror=o,e.src=t})))).then((()=>e),(()=>e)):Promise.resolve(e)}(e,t))).then((e=>function(e,t){return w(this,void 0,void 0,(function*(){const n=m(e.childNodes).map((e=>T(e,t)));return Promise.all(n).then((()=>e))}))}(e,t))):Promise.resolve(e)}))}var b=function(e,t,n,o){return new(n||(n=Promise))((function(i,c){function r(e){try{u(o.next(e))}catch(e){c(e)}}function l(e){try{u(o.throw(e))}catch(e){c(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}u((o=o.apply(e,t||[])).next())}))};const S={};function M(e){return b(this,void 0,void 0,(function*(){const t=[],n=[];return e.forEach((t=>{if("cssRules"in t)try{m(t.cssRules).forEach((e=>{e.type===CSSRule.IMPORT_RULE&&n.push(P(e.href).then(L).then((e=>{x(e).forEach((e=>{t.insertRule(e,t.cssRules.length)}))})).catch((e=>{console.log("Error loading remote css",e.toString())})))}))}catch(o){const i=e.find((e=>null===e.href))||document.styleSheets[0];null!=t.href&&n.push(P(t.href).then(L).then((e=>{x(e).forEach((e=>{i.insertRule(e,t.cssRules.length)}))})).catch((e=>{console.log("Error loading remote stylesheet",e.toString())}))),console.log("Error inlining remote css file",o.toString())}})),Promise.all(n).then((()=>(e.forEach((e=>{if("cssRules"in e)try{m(e.cssRules).forEach((e=>{t.push(e)}))}catch(t){console.log(`Error while reading CSS rules from ${e.href}`,t.toString())}})),t)))}))}function k(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>v(e.style.getPropertyValue("src"))))}function x(e){if(void 0===e)return[];let t=e;const n=[],o=new RegExp("(\\/\\*[\\s\\S]*?\\*\\/)","gi");t=t.replace(o,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");let c;for(;c=i.exec(t),null!==c;)n.push(c[0]);t=t.replace(i,"");const r=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;c=r.exec(t),null!==c;)n.push(c[0]);return n}function P(e,t){if(S[e])return S[e];const n=fetch(e).then((t=>({url:e,cssText:t.text()})),(e=>{console.log("ERROR FETCHING CSS: ",e.toString())}));return S[e]=n,n}function L(e){return b(this,void 0,void 0,(function*(){return e.cssText.then((t=>{let n=t;const o=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map((t=>{let i=t.replace(o,"$1");if(!i.startsWith("https://")){const t=e.url;i=new URL(i,t).href}return new Promise(((e,o)=>{fetch(i).then((e=>e.blob())).then((o=>{const i=new FileReader;i.addEventListener("load",(o=>{n=n.replace(t,`url(${i.result})`),e([t,i.result])})),i.readAsDataURL(o)})).catch(o)}))}));return Promise.all(i).then((()=>n))}))}))}function C(e,t,n){const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),c=document.createElementNS(o,"foreignObject");return i.setAttributeNS("","width",`${t}`),i.setAttributeNS("","height",`${n}`),c.setAttributeNS("","width","100%"),c.setAttributeNS("","height","100%"),c.setAttributeNS("","x","0"),c.setAttributeNS("","y","0"),c.setAttributeNS("","externalResourcesRequired","true"),i.appendChild(c),c.appendChild(e),function(e){return t=this,n=void 0,i=function*(){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))},new((o=void 0)||(o=Promise))((function(e,c){function r(e){try{u(i.next(e))}catch(e){c(e)}}function l(e){try{u(i.throw(e))}catch(e){c(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,l)}u((i=i.apply(t,n||[])).next())}));var t,n,o,i}(i)}var H,R=function(e,t,n,o){return new(n||(n=Promise))((function(i,c){function r(e){try{u(o.next(e))}catch(e){c(e)}}function l(e){try{u(o.throw(e))}catch(e){c(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}u((o=o.apply(e,t||[])).next())}))};function _(e,t={}){return{width:t.width||function(e){const t=a(e,"border-left-width"),n=a(e,"border-right-width");return e.scrollWidth+t+n}(e),height:t.height||function(e){const t=a(e,"border-top-width"),n=a(e,"border-bottom-width");return e.scrollHeight+t+n}(e)}}function A(e,t={}){return R(this,void 0,void 0,(function*(){const{width:n,height:o}=_(e,t);return h(e,t.filter,!0).then((e=>function(e,t){return b(this,void 0,void 0,(function*(){return function(e){return b(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{e.ownerDocument||n(new Error("Provided element is not within a Document")),t(m(e.ownerDocument.styleSheets))})).then(M).then(k)}))}(e).then((e=>Promise.all(e.map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return E(e.cssText,n,t)}))))).then((e=>e.join("\n"))).then((t=>{const n=document.createElement("style"),o=document.createTextNode(t);return n.appendChild(o),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),e}))}))}(e,t))).then((e=>T(e,t))).then((e=>function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const o=t.style;return null!=o&&Object.keys(o).forEach((e=>{n[e]=o[e]})),e}(e,t))).then((e=>C(e,n,o)))}))}function $(e,t={}){return R(this,void 0,void 0,(function*(){return A(e,t).then(d).then((100,e=>new Promise((t=>{setTimeout((()=>{t(e)}),100)})))).then((n=>{const o=document.createElement("canvas"),i=o.getContext("2d"),c=t.pixelRatio||function(){let e,t;try{t=process}catch(e){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),{width:r,height:l}=_(e,t);return o.width=r*c,o.height=l*c,o.style.width=`${r}`,o.style.height=`${l}`,t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,o.width,o.height)),i.drawImage(n,0,0),o}))}))}function N(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){t(n.responseText)},n.send()}window.toJpeg=function(e,t={}){return R(this,void 0,void 0,(function*(){return $(e,t).then((e=>e.toDataURL("image/jpeg",t.quality||1)))}))},window.toPng=function(e,t={}){return R(this,void 0,void 0,(function*(){return $(e,t).then((e=>e.toDataURL()))}))},window.toBlob=function(e,t={}){return R(this,void 0,void 0,(function*(){return $(e,t).then(u)}))},window.toPixelData=function(e,t={}){return R(this,void 0,void 0,(function*(){const{width:n,height:o}=_(e,t);return $(e,t).then((e=>e.getContext("2d").getImageData(0,0,n,o).data))}))},window.toSvg=A,window.toCanvas=$,window.Promise||("https://cdn.jsdelivr.net/npm/promise-polyfill/dist/polyfill.min.js",(H=document.createElement("script")).src="https://cdn.jsdelivr.net/npm/promise-polyfill/dist/polyfill.min.js",document.body.appendChild(H));var D=[];N("https://cdn.jsdelivr.net/gh/TransparentLC/WechatMomentScreenshot/avatarURL.json",(function(e){D=JSON.parse(e)}));var U=[];N("https://cdn.jsdelivr.net/gh/TransparentLC/WechatMomentScreenshot/emoticon.json",(function(e){U=JSON.parse(e)}));var W,j,O={name:"Cesaryuan",text:"Quicker真的很好用啊，大家快来用啊[微笑]",location:"",app:"",height:1920,uiWhite:!0,appIcon:!0,statusIcon:!0};try{W=JSON.parse(localStorage.getItem("config"))||{}}catch(e){W={}}for(var q in O)void 0===W[q]&&(W[q]=O[q]);function F(e,t){var n=new Date(e.getTime()-60*e.getTimezoneOffset()*1e3-(e.getTime()-60*e.getTimezoneOffset()*1e3)%864e5),o=new Date(t.getTime()-60*t.getTimezoneOffset()*1e3-(t.getTime()-60*t.getTimezoneOffset()*1e3)%864e5);return n.getTime()==o.getTime()?(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()):n.getTime()-o.getTime()==864e5?"昨天 "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()):t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日 "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}document.getElementById("configName").value=W.name,document.getElementById("configText").value=W.text,document.getElementById("configLocation").value=W.location,document.getElementById("configApp").value=W.app,document.getElementById("configHeight").value=W.height,document.getElementById("configUIWhite").checked=W.uiWhite,document.getElementById("configTopBarAppIcons").checked=W.appIcon,document.getElementById("configTopBarStatusIcons").checked=W.statusIcon,document.getElementById("avatar").style.backgroundImage="url("+(localStorage.getItem("avatar")||"https://ae01.alicdn.com/kf/HTB1yE4fMmzqK1RjSZFp761kSXXal.png")+")";var z=[];function V(e){e=e.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>");for(var t=0;t<U.length;t++)e=e.replace(new RegExp(U[t].name,"g"),'<img class="emoticon" src="'+U[t].URL+'">');return e}document.getElementById("configTypeText").onclick=function(){document.getElementById("configWebsite").style.display="none",document.getElementById("configSingleImage").style.display="none",document.getElementById("configMultiImage").style.display="none",document.getElementById("article").style.display="none",document.getElementById("singleImage").style.display="none",document.getElementById("multiImage").style.display="none"},document.getElementById("configTypeWebsite").onclick=function(){document.getElementById("configWebsite").style.display="block",document.getElementById("configSingleImage").style.display="none",document.getElementById("configMultiImage").style.display="none",document.getElementById("article").style.display="flex",document.getElementById("singleImage").style.display="none",document.getElementById("multiImage").style.display="none"},document.getElementById("configTypeSingleImage").onclick=function(){document.getElementById("configWebsite").style.display="none",document.getElementById("configSingleImage").style.display="block",document.getElementById("configMultiImage").style.display="none",document.getElementById("article").style.display="none",document.getElementById("singleImage").style.display="block",document.getElementById("multiImage").style.display="none"},document.getElementById("configTypeMultiImage").onclick=function(){document.getElementById("configWebsite").style.display="none",document.getElementById("configSingleImage").style.display="none",document.getElementById("configMultiImage").style.display="block",document.getElementById("article").style.display="none",document.getElementById("singleImage").style.display="none",document.getElementById("multiImage").style.display="block"};var J=new Date;document.getElementById("configScreenshotDate").valueAsDate=J,document.getElementById("configScreenshotTimeHour").value=J.getHours(),document.getElementById("configScreenshotTimeMinute").value=J.getMinutes(),document.getElementById("configPostDate").valueAsDate=J,document.getElementById("configPostTimeHour").value=J.getHours(),document.getElementById("configPostTimeMinute").value=J.getMinutes(),document.getElementById("configCommentDate").valueAsDate=J,document.getElementById("configCommentTimeHour").value=J.getHours(),document.getElementById("configCommentTimeMinute").value=J.getMinutes(),document.getElementById("configLike").value=Math.floor(17*Math.random())+5,setTimeout(K,800),document.getElementById("configPostTimeHour").addEventListener("input",(function(){document.getElementById("configPostTimeHour").value>23?document.getElementById("configPostTimeHour").value=23:document.getElementById("configPostTimeHour").value<0&&(document.getElementById("configPostTimeHour").value=0)})),document.getElementById("configPostTimeMinute").addEventListener("input",(function(){document.getElementById("configPostTimeMinute").value>59?document.getElementById("configPostTimeMinute").value=59:document.getElementById("configPostTimeMinute").value<0&&(document.getElementById("configPostTimeMinute").value=0)})),document.getElementById("configScreenshotTimeHour").addEventListener("input",(function(){document.getElementById("configScreenshotTimeHour").value>23?document.getElementById("configScreenshotTimeHour").value=23:document.getElementById("configScreenshotTimeHour").value<0&&(document.getElementById("configScreenshotTimeHour").value=0)})),document.getElementById("configScreenshotTimeMinute").addEventListener("input",(function(){document.getElementById("configScreenshotTimeMinute").value>59?document.getElementById("configScreenshotTimeMinute").value=59:document.getElementById("configScreenshotTimeMinute").value<0&&(document.getElementById("configScreenshotTimeMinute").value=0)})),document.getElementById("configCommentTimeHour").addEventListener("input",(function(){document.getElementById("configCommentTimeHour").value>23?document.getElementById("configCommentTimeHour").value=23:document.getElementById("configCommentTimeHour").value<0&&(document.getElementById("configCommentTimeHour").value=0)})),document.getElementById("configCommentTimeMinute").addEventListener("input",(function(){document.getElementById("configCommentTimeMinute").value>59?document.getElementById("configCommentTimeMinute").value=59:document.getElementById("configCommentTimeMinute").value<0&&(document.getElementById("configCommentTimeMinute").value=0)})),document.getElementById("configLike").addEventListener("input",(function(){document.getElementById("configLike").value<0&&(document.getElementById("configLike").value=0)})),document.getElementById("configAvatar").addEventListener("change",(function(){j=this.files[0],document.getElementById("avatar").style.backgroundImage='url("'+URL.createObjectURL(j)+'")'})),document.getElementById("configArticleIcon").addEventListener("change",(function(){document.getElementById("articleIcon").style.backgroundImage='url("'+URL.createObjectURL(this.files[0])+'")'})),document.getElementById("configSetSingleImage").addEventListener("change",(function(){document.getElementById("image").src=URL.createObjectURL(this.files[0])}));for(var X=1;X<=9;X++)!function(e){document.getElementById("configSetMultiImage"+e).addEventListener("change",(function(){document.getElementById("image"+e).style.backgroundImage='url("'+URL.createObjectURL(this.files[0])+'")'}))}(X);for(var G of document.querySelectorAll("textarea, input"))G.addEventListener("input",(function(){document.getElementById("fakeWechatMoment").style.transform="scale(0.4)",K()}));function K(){var e=document.getElementById("configUIWhite").checked;if(e?(document.getElementById("fakeWechatMoment").classList.add("whiteUI"),document.querySelector("#header > img").src="mdicons/black_icons/back.svg",document.querySelector(".content > img").src="mdicons/black_icons/comment.svg",document.querySelector("#footer > img").src="mdicons/black_icons/emoticon.svg"):(document.getElementById("fakeWechatMoment").classList.remove("whiteUI"),document.querySelector("#header > img").src="mdicons/white_icons/back.svg",document.querySelector(".content > img").src="mdicons/white_icons/comment.svg",document.querySelector("#footer > img").src="mdicons/white_icons/emoticon.svg"),document.getElementById("name").innerText=document.getElementById("configName").value,document.getElementById("text").innerText=document.getElementById("configText").value,document.getElementById("articleTitle").innerText=document.getElementById("configArticleTitle").value,""==document.getElementById("configLocation").value?document.getElementById("location").style.display="none":(document.getElementById("location").style.display="inline",document.getElementById("location").innerText=document.getElementById("configLocation").value),document.getElementById("text").innerHTML=V(document.getElementById("text").innerText),document.getElementById("configTypeMultiImage").checked){for(var t=1;t<=9;t++)document.getElementById("image"+t).style.display="inline-block";var n=0;for(n=9;n>=1&&""==document.getElementById("image"+n).style.backgroundImage;n--);for(4==n&&(document.getElementById("image5").style.backgroundImage=document.getElementById("image4").style.backgroundImage,document.getElementById("image4").style.backgroundImage=document.getElementById("image3").style.backgroundImage,document.getElementById("image3").style.backgroundImage="",n=5),t=n+1;t<=9;t++)document.getElementById("image"+t).style.display="none"}var o=[4,4,4,4,4,3,3,3,3,2,2,2,2,1,1,1,0],i=[20,30,50,60,80,90,"full"];document.getElementById("configTopBarStatusIcons").checked?(document.getElementById("topBarIconWifi").src="mdicons/"+(e?"black_icons":"white_icons")+"/ic_signal_wifi_"+o[Math.floor(Math.random()*o.length)]+"_bar_48px.svg",document.getElementById("topBarIconSignal").src="mdicons/"+(e?"black_icons":"white_icons")+"/ic_signal_cellular_"+o[Math.floor(Math.random()*[4,4,4,4,4,3,3,3,3,3,2,2,2,2,1,1,0].length)]+"_bar_48px.svg",document.getElementById("topBarIconBattery").src="mdicons/"+(e?"black_icons":"white_icons")+"/ic_battery_"+(Math.random()>.75?"charging_":"")+i[Math.floor(Math.random()*i.length)]+"_48px.svg"):(document.getElementById("topBarIconWifi").src="mdicons/"+(e?"black_icons":"white_icons")+"/ic_signal_wifi_4_bar_48px.svg",document.getElementById("topBarIconSignal").src="mdicons/"+(e?"black_icons":"white_icons")+"/ic_signal_cellular_4_bar_48px.svg",document.getElementById("topBarIconBattery").src="mdicons/"+(e?"black_icons":"white_icons")+"/ic_battery_full_48px.svg");var c=[["qq",.5],["wechat",.5],["cloudmusic",.25],["coolapk",.15],["tieba",.15],["acfun",.15]];if(c.sort((function(){return Math.random()>.5?1:-1})),document.getElementById("topBarAppIcons").innerHTML="",document.getElementById("configTopBarAppIcons").checked)for(t=0;t<c.length;t++)Math.random()<c[t][1]&&(document.getElementById("topBarAppIcons").innerHTML+='<img class="topBarIcon" src="mdicons/'+(e?"black_icons":"white_icons")+"/app_"+c[t][0]+'.svg">');var r=document.getElementById("configPostDate").valueAsDate;r.setHours(document.getElementById("configPostTimeHour").value),r.setMinutes(document.getElementById("configPostTimeMinute").value);var l=document.getElementById("configScreenshotDate").valueAsDate;l.setHours(document.getElementById("configScreenshotTimeHour").value),l.setMinutes(document.getElementById("configScreenshotTimeMinute").value),document.getElementById("time").innerText=F(l,r),document.getElementById("topBarTime").innerText=(document.getElementById("configScreenshotTimeHour").value<10?"0"+document.getElementById("configScreenshotTimeHour").value:document.getElementById("configScreenshotTimeHour").value)+":"+(document.getElementById("configScreenshotTimeMinute").value<10?"0"+document.getElementById("configScreenshotTimeMinute").value:document.getElementById("configScreenshotTimeMinute").value),""!=document.getElementById("configApp")&&(document.getElementById("time").innerText+=" "+document.getElementById("configApp").value),document.getElementsByClassName("likeAvatar");var u=D.concat(),m=0;for(document.getElementById("likeAvatarList").innerHTML="",t=0;t<document.getElementById("configLike").value;t++){u.length<=0&&(u=D.concat()),m=Math.floor(Math.random()*u.length);var a=document.createElement("div");a.setAttribute("class","likeAvatar squareImage"),a.setAttribute("style",'background-image:url("'+u[m]+'")'),document.getElementById("likeAvatarList").appendChild(a),u.splice(m,1)}if(document.getElementById("commentList").innerHTML="",document.getElementById("configShowComment").checked&&z.length)for(document.getElementById("comment").style.display="block",t=0;t<z.length;t++)document.getElementById("commentList").innerHTML+='<div class="commentItem"><div class="commentAvatar squareImage" style="background-image: url('+z[t].avatar+');"></div><div class="content"><span class="commentName">'+z[t].name+'</span><span class="commentTime">'+F(l,z[t].date)+'</span><div class="commentText">'+V(z[t].content)+"</div></div></div>";else document.getElementById("comment").style.display="none";var d=Number(document.getElementById("configHeight").value);document.getElementById("fakeWechatMoment").style.display="block",document.getElementById("fakeWechatMoment").style.width="1080px",document.getElementById("fakeWechatMoment").style.height="",document.getElementById("fakeWechatMoment").style.height=(window.getComputedStyle(document.getElementById("fakeWechatMoment")).height.replace("px","")>d?window.getComputedStyle(document.getElementById("fakeWechatMoment")).height.replace("px",""):d)+"px",document.getElementById("configLike").value<=0?(document.getElementById("triangle").style.display="none",document.getElementById("like").style.display="none"):(document.getElementById("triangle").style.display="block",document.getElementById("like").style.display="block");var s=Number(window.getComputedStyle(document.getElementById("topBar")).height.replace("px",""))+Number(window.getComputedStyle(document.getElementById("header")).height.replace("px",""))+Number(window.getComputedStyle(document.getElementById("main")).height.replace("px",""));document.getElementById("footer").style.bottom=(s<d-Number(window.getComputedStyle(document.getElementById("footer")).height.replace("px",""))?-d+Number(window.getComputedStyle(document.getElementById("footer")).height.replace("px",""))+s:0)+"px"}document.getElementById("generate").addEventListener("click",(function(){K();var e=document.getElementById("fakeWechatMoment");e.style.transform="scale(1)",document.getElementById("generate").setAttribute("disabled",""),document.getElementById("generate").innerText="生成中...",$(e,{pixelRatio:1}).then((function(t){e.style.transform="scale(0.4)";var n=t.toDataURL();document.getElementById("generated").src=n,document.getElementById("save").setAttribute("href",n),document.getElementById("save").setAttribute("download",+new Date+".png"),new mdui.Dialog(document.getElementById("generatedPopup")).open();var o={name:document.getElementById("configName").value,text:document.getElementById("configText").value,location:document.getElementById("configLocation").value,app:document.getElementById("configApp").value,height:parseInt(document.getElementById("configHeight").value),uiWhite:document.getElementById("configUIWhite").checked,appIcon:document.getElementById("configTopBarAppIcons").checked,statusIcon:document.getElementById("configTopBarStatusIcons").checked};if(localStorage.setItem("config",JSON.stringify(o)),j){var i=new FileReader;i.readAsDataURL(j),i.onload=function(){localStorage.setItem("avatar",this.result)}}})).catch((function(e){mdui.alert('<div class="mdui-typo"><p>错误信息：</p><pre>'+e+'</pre><p>你可以通过 <a href="https://github.com/TransparentLC/WechatMomentScreenshot/issues" target="_blank">Issue</a> 向作者反馈 BUG～</p></div>',"生成失败")})).finally((function(){document.getElementById("generate").removeAttribute("disabled"),document.getElementById("generate").innerText="生成"}))}))})();
//# sourceMappingURL=bundle.js.map